# 🚀 音乐播放器版编舞生成器 - 快速启动指南

## ✅ 问题已修复！

### 修复的问题
- ✅ **导入错误**: 修复了 `dance_references_enhanced` 模块导入错误
- ✅ **模块重命名**: 统一使用 `dance_references` 模块
- ✅ **依赖关系**: 所有模块现在都能正确导入

## 🎵 新功能特点

### 🎬 音乐播放器集成
- **内置播放器**: 直接在网页中播放音频文件
- **时间同步**: 根据播放时间实时显示对应的舞蹈建议
- **进度控制**: 可拖拽的时间滑块，精确控制播放位置

### 🔍 视频搜索功能
- **YouTube搜索**: 直接跳转到YouTube搜索结果
- **搜索建议**: 提供精确的搜索关键词
- **多关键词**: 为每个动作提供多个搜索选项

### 📅 时间轴视图
- **完整时间轴**: 显示所有片段的详细信息
- **实时更新**: 根据当前播放时间高亮对应片段
- **详细信息**: 包含开始时间、结束时间、参考动作等

## 🚀 快速启动

### 1. 启动系统
```bash
streamlit run app.py
```

### 2. 设置API密钥
- 在侧边栏输入你的OpenAI API密钥
- 系统会自动设置环境变量

### 3. 上传音频文件
- 在"音频文件上传"标签页上传MP3/WAV文件
- 点击"生成编舞"按钮
- 等待编舞生成完成

### 4. 使用音乐播放器
- 切换到"音乐播放器"标签页
- 使用内置播放器播放音乐
- 拖拽时间滑块查看不同时间点的舞蹈建议

## 🎭 功能演示

### 实时舞蹈建议
- **时间同步**: 根据播放时间自动显示对应片段的舞蹈建议
- **详细信息**: 包含动作描述、参考动作、学习建议等
- **难度评估**: 显示难度等级和能量等级

### 视频搜索功能
- **直接跳转**: 点击链接直接跳转到YouTube搜索结果
- **搜索建议**: 提供多个搜索关键词选项
- **分类搜索**: 根据舞蹈风格和动作类型提供精确搜索

### 时间轴视图
- **完整概览**: 显示所有片段的详细信息
- **表格形式**: 便于查看和比较不同片段
- **详细信息**: 包含时间、动作、难度等信息

## 📋 输出示例

### 当前片段信息
```
⏰ 当前时间: 2.0秒
📍 当前片段: 第1段 (0.0s - 3.7s)
🎭 动作描述: 开场：使用Harlem Shake建立节奏感，配合基础步伐
🎬 参考动作: Harlem Shake
📊 难度: 2/5, 能量: 4/5
💡 学习建议: 先练习头部和肩膀的协调动作，再配合脚步
🔍 Harlem Shake 搜索: https://www.youtube.com/results?search_query=Harlem+Shake+dance+tutorial
```

### 视频搜索链接
- **Harlem Shake**: https://www.youtube.com/results?search_query=Harlem+Shake+dance+tutorial
- **Running Man**: https://www.youtube.com/results?search_query=Running+Man+dance+tutorial
- **Freeze**: https://www.youtube.com/results?search_query=Freeze+dance+tutorial+hip+hop

## 💡 使用技巧

### 1. 音乐播放
- 使用时间滑块快速跳转到特定时间点
- 观察当前时间对应的舞蹈建议
- 重复播放特定片段进行练习

### 2. 舞蹈学习
- 点击视频搜索链接找到教学视频
- 根据学习建议逐步练习
- 结合音乐节拍进行练习

### 3. 时间轴使用
- 查看完整编舞的时间安排
- 了解每个片段的难度和能量要求
- 规划练习时间和顺序

## 🔧 技术特点

### 前端技术
- **Streamlit**: 提供用户界面
- **HTML5 Audio**: 内置音频播放器
- **实时更新**: 根据播放时间动态更新内容

### 后端功能
- **音频分析**: librosa库分析BPM和节拍
- **AI生成**: OpenAI GPT-3.5-turbo生成编舞
- **数据同步**: 音乐播放与舞蹈建议实时同步

## 🎯 优势对比

### 传统方式
- ❌ 需要手动打开音乐文件
- ❌ 需要自己计算时间点
- ❌ 舞蹈建议与音乐分离
- ❌ 难以找到教学视频

### 音乐播放器版
- ✅ 集成音乐播放器
- ✅ 自动时间同步
- ✅ 实时舞蹈建议
- ✅ 直接跳转视频搜索
- ✅ 完整时间轴视图

## 📞 故障排除

### 常见问题

1. **音频无法播放**
   - 检查浏览器是否支持HTML5 Audio
   - 确认音频文件格式为MP3或WAV
   - 检查文件是否损坏

2. **时间同步不准确**
   - 刷新页面重新加载
   - 检查编舞数据是否完整
   - 确认时间滑块设置正确

3. **视频搜索链接无效**
   - 检查网络连接
   - 确认YouTube可访问
   - 尝试手动搜索关键词

## 🎉 总结

音乐播放器版AI编舞生成器提供了完整的音乐与舞蹈结合体验：

- **🎵 音乐播放**: 内置播放器，无需外部软件
- **⏰ 时间同步**: 实时显示对应时间点的舞蹈建议
- **🔍 视频搜索**: 直接跳转到YouTube找到教学视频
- **📅 时间轴**: 完整查看所有片段的详细信息
- **💡 学习指导**: 详细的动作描述和学习建议

现在你可以享受完整的音乐与舞蹈结合体验了！🎵💃

---

**🚀 立即开始**: `streamlit run app.py`
